## API Документация

### Описание

Это API предоставляет набор конечных точек для управления аккаунтами пользователей и компаниями, включая создание, чтение, обновление и удаление. API использует JSON для обмена данными и следует RESTful принципам.

### Базовый URL

`http://127.0.0.1/`

### Аутентификация

В данный момент API не требует аутентификации.

### Конечные точки

#### Аккаунты

**1. Получение списка аккаунтов**

*   **Метод:**  `GET`
*   **URL:**  `/index.php`
*   **Параметры запроса:**
    *   `page` (int): Номер страницы (по умолчанию 1)
    *   `limit` (int): Количество аккаунтов на странице (по умолчанию 10)
    *   `deleted` (boolean): `true` - для получения удаленных аккаунтов, `false` - для получения неудаленных (по умолчанию `false`)
*   **Ответ:**

```json
{
    "success": true,
    "message": "Список аккаунтов",
    "data": [
        {
            "id": 1,
            "first_name": "Иван",
            "last_name": "Иванов",
            // ... (другие поля аккаунта)
        },
        // ... (другие аккаунты)
    ],
    "pagination": {
        "currentPage": 1,
        "totalPages": 5,
        "totalItems": 45
    }
}
```

**2. Получение аккаунта по ID**

*   **Метод:**  `GET`
*   **URL:**  `/index.php?id={id}`
*   **Параметры запроса:**
    *   `id` (int): ID аккаунта
*   **Ответ:**

```json
{
    "success": true,
    "message": "Данные аккаунта",
    "data": {
        "id": 1,
        "first_name": "Иван",
        "last_name": "Иванов",
        // ... (другие поля аккаунта)
    }
}
```

**3. Создание аккаунта**

*   **Метод:**  `POST`
*   **URL:**  `/create.php`
*   **Тело запроса (JSON):**

```json
{
    "first_name": "Иван",
    "last_name": "Иванов",
    "email": "ivan.ivanov@example.com",
    "company_id": 1, // ID компании
    "position": "Developer",
    "phone_1": "+79991234567",
    "phone_2": "+79876543210",
    "phone_3": null
}
```

*   **Ответ:**

```json
{
    "success": true,
    "message": "Аккаунт успешно создан",
    "data": {
        "id": 123 // ID нового аккаунта
    }
}
```

**4. Обновление аккаунта**

*   **Метод:**  `PUT`
*   **URL:**  `/edit.php?id={id}`
*   **Тело запроса (JSON):**

```json
{
    "first_name": "Иван",
    "last_name": "Петров",
    "email": "ivan.petrov@example.com"
    // ... (другие поля для обновления)
}
```

*   **Ответ:**

```json
{
    "success": true,
    "message": "Аккаунт успешно обновлен"
}
```

**5. "Мягкое" удаление аккаунта**

*   **Метод:**  `DELETE`
*   **URL:**  `/delete.php`
*   **Тело запроса (JSON):**

```json
{
    "id": 123
}
```

*   **Ответ:**

```json
{
    "success": true,
    "message": "Аккаунт помечен как удаленный"
}
```

**6. Восстановление аккаунта**

*   **Метод:**  `POST`
*   **URL:**  `/restore.php`
*   **Тело запроса (JSON):**

```json
{
    "id": 123
}
```

*   **Ответ:**

```json
{
    "success": true,
    "message": "Аккаунт успешно восстановлен"
}
```

**7. Окончательное удаление аккаунта**

*   **Метод:**  `DELETE`
*   **URL:**  `/delete.php`
*   **Тело запроса (JSON):**

```json
{
    "id": 123,
    "permanent": true
}
```

*   **Ответ:**

```json
{
    "success": true,
    "message": "Аккаунт успешно удален"
}
```

#### Компании

**1. Получение списка компаний**

*   **Метод:**  `GET`
*   **URL:**  `/companies.php`
*   **Параметры запроса:**
    *   `page` (int): Номер страницы (по умолчанию 1)
    *   `limit` (int): Количество компаний на странице (по умолчанию 10)
*   **Ответ:**

```json
{
    "success": true,
    "message": "Список компаний",
    "data": [
        {
            "id": 1,
            "name": "Название компании",
            "address": "Адрес компании"
        },
        // ... (другие компании)
    ],
    "pagination": {
        "currentPage": 1,
        "totalPages": 3,
        "totalItems": 25
    }
}
```

**2. Получение компании по ID**

*   **Метод:**  `GET`
*   **URL:**  `/company.php?id={id}`
*   **Параметры запроса:**
    *   `id` (int): ID компании
*   **Ответ:**

```json
{
    "success": true,
    "message": "Данные компании",
    "data": {
        "id": 1,
        "name": "Название компании",
        "address": "Адрес компании"
    }
}
```

**3. Создание компании**

*   **Метод:**  `POST`
*   **URL:**  `/companies.php`
*   **Тело запроса (JSON):**

```json
{
    "name": "Название новой компании",
    "address": "Адрес новой компании"
}
```

*   **Ответ:**

```json
{
    "success": true,
    "message": "Компания успешно создана",
    "data": {
        "id": 123 // ID новой компании
    }
}
```

**4. Обновление компании**

*   **Метод:**  `PUT`
*   **URL:**  `/company.php?id={id}`
*   **Тело запроса (JSON):**

```json
{
    "name": "Обновленное название компании",
    "address": "Обновленный адрес компании"
}
```

*   **Ответ:**

```json
{
    "success": true,
    "message": "Компания успешно обновлена"
}
```

**5. Удаление компании**

*   **Метод:**  `DELETE`
*   **URL:**  `/company.php?id={id}`
*   **Ответ:**

```json
{
    "success": true,
    "message": "Компания успешно удалена"
}
```

**6. Получение списка сотрудников компании**

*   **Метод:**  `GET`
*   **URL:**  `/company_employees.php?id={id}`
*   **Параметры запроса:**
    *   `id` (int): ID компании
    *   `page` (int): Номер страницы (по умолчанию 1)
    *   `limit` (int): Количество сотрудников на странице (по умолчанию 10)
*   **Ответ:**

```json
{
    "success": true,
    "message": "Список сотрудников",
    "data": [
        {
            "id": 1,
            "first_name": "Иван",
            "last_name": "Иванов",
            // ... (другие поля аккаунта сотрудника)
        },
        // ... (другие сотрудники)
    ],
    "pagination": {
        "currentPage": 1,
        "totalPages": 2,
        "totalItems": 15
    }
}
```

### Коды ошибок

API возвращает стандартные HTTP-коды ответов:

*   200 OK - успешный запрос
*   201 Created - создание нового ресурса
*   400 Bad Request - неверный запрос
*   404 Not Found - ресурс не найден
*   405 Method Not Allowed - метод не разрешен
*   500 Internal Server Error - ошибка сервера

### CORS (Cross-Origin Resource Sharing)

API поддерживает CORS для разработки.

### Примечания

*   Все запросы, кроме `GET`, должны отправляться с заголовком `Content-Type: application/json`.

