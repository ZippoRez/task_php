
### Описание

Проект представляет собой веб-приложение для управления аккаунтами пользователей.  
Приложение позволяет создавать, редактировать, удалять и восстанавливать аккаунты.

### Технологии

- **Бэкенд:** PHP

- **База данных:** MySQL

- **Фронтенд:** React + TypeScript

- **UI-библиотека:** Material-UI


### Функциональность

- **Просмотр списка аккаунтов:**

	- Отображение списка аккаунтов в таблице.
        
    - Пагинация для отображения большого количества аккаунтов.
        
    - Возможность выбора количества аккаунтов на странице.
        
- **Создание аккаунта:**
    
    - Форма для ввода данных нового аккаунта.
        
    - Валидация данных формы на стороне сервера.
        
    - Сохранение нового аккаунта в базе данных.
        
- **Редактирование аккаунта:**
    
    - Загрузка данных аккаунта с сервера.
        
    - Форма для редактирования данных аккаунта.
        
    - Валидация данных формы.
        
    - Обновление данных аккаунта в базе данных.
        
- **Удаление аккаунта:**
    
    - "Мягкое" удаление аккаунта (установка deleted_at).
        
    - Диалог подтверждения удаления.
        
    - Окончательное удаление аккаунта из базы данных.
        
- **Восстановление аккаунта:**
    
    - Просмотр списка удаленных аккаунтов.
        
    - Восстановление удаленного аккаунта (сброс deleted_at).
        
- **Автоматическое удаление старых аккаунтов:**
    
    - CRON-скрипт delete_old_accounts_cron.php удаляет аккаунты, помеченные как удаленные более часа назад.
        

### Структура проекта

- **backend/:** Содержит серверную часть приложения (PHP).
    
    - index.php: Обрабатывает GET-запросы для получения списка аккаунтов и данных одного аккаунта.
        
    - create.php: Обрабатывает POST-запросы для создания новых аккаунтов.
        
    - edit.php: Обрабатывает PUT-запросы для обновления данных аккаунта.
        
    - delete.php: Обрабатывает DELETE-запросы для удаления аккаунтов.
        
    - restore.php: Обрабатывает POST-запросы для восстановления удаленных аккаунтов.
        
    - delete_old_accounts_cron.php: CRON-скрипт для удаления старых аккаунтов.
        
    - includes/: Содержит вспомогательные файлы.
        
        - database.php: Класс для работы с базой данных.
            
        - account.php: Класс для работы с аккаунтами.
            
        - error_codes.php: Константы с кодами ошибок.
            
    - utils/: Содержит вспомогательные функции.
        
        - helper.php: Файл с различными вспомогательными функциями (валидация, санитизация, генерация паролей).
            
- **frontend/:** Содержит клиентскую часть приложения (React + TypeScript).
    
    - src/: Содержит исходный код фронтенда.
        
        - components/: Содержит компоненты React.
            
            - AccountList.tsx: Компонент списка аккаунтов.
                
            - AccountCreate.tsx: Компонент формы создания аккаунта.
                
            - AccountEdit.tsx: Компонент формы редактирования аккаунта.
                
            - AccountRow.tsx: Компонент строки таблицы аккаунтов.
                
            - AccountTable.tsx: Компонент таблицы аккаунтов.
                
            - ConfirmationDialog.tsx: Компонент диалога подтверждения.
                
            - InputTextField.tsx: Компонент текстового поля ввода.
                
            - Trash.tsx: Компонент корзины.
                
        - types/: Содержит определения типов данных.
            
            - Account.ts: Интерфейс Account.
                
        - config.ts: Файл с конфигурацией приложения.
            
        - App.tsx: Главный компонент приложения.
            

### Установка и запуск

1. **Настройка бэкенда:**
    
    - Скопируйте файлы бэкенда в директорию, доступную по HTTP.
        
    - Настройте подключение к базе данных в includes/database.php.
        
    - Настройте CRON для запуска delete_old_accounts_cron.php с нужной периодичностью.
        
2. **Настройка фронтенда:**
    
    - Установите зависимости: npm install или yarn install.
        
    - Настройте API URL в src/config.ts.
        
    - Запустите приложение: npm start или yarn start.
        

### Дополнительная информация

- Номера телефонов хранятся в базе данных в нормализованном формате +7XXXXXXXXXX.
    
- Для "мягкого" удаления аккаунтов используется поле deleted_at.
    
- CRON-скрипт автоматически удаляет старые аккаунты, чтобы поддерживать базу данных в актуальном состоянии.