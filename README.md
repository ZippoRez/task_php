### Описание

Проект представляет собой веб-приложение для управления аккаунтами пользователей и компаниями. Приложение позволяет создавать, редактировать, удалять и восстанавливать аккаунты, а также создавать, редактировать и просматривать информацию о компаниях.

### Технологии

- **Бэкенд:** PHP
- **База данных:** MySQL
- **Фронтенд:** React + TypeScript
- **UI-библиотека:** Material-UI

### Функциональность

- **Управление аккаунтами**:
    - **Просмотр списка аккаунтов**:
        - Отображение списка аккаунтов в таблице.
        - Пагинация для отображения большого количества аккаунтов.
        - Возможность выбора количества аккаунтов на странице.
        - Фильтрация по удаленным/неудаленным аккаунтам.
    - **Создание аккаунта**:
        - Форма для ввода данных нового аккаунта.
        - Валидация данных формы на стороне клиента и сервера.
        - Сохранение нового аккаунта в базе данных.
    - **Редактирование аккаунта**:
        - Загрузка данных аккаунта с сервера.
        - Форма для редактирования данных аккаунта.
        - Валидация данных формы.
        - Обновление данных аккаунта в базе данных.
    - **Удаление аккаунта**:
        - "Мягкое" удаление аккаунта (установка `deleted_at`).
        - Диалог подтверждения удаления.
        - Окончательное удаление аккаунта из базы данных.
    - **Восстановление аккаунта**:
        - Просмотр списка удаленных аккаунтов.
        - Восстановление удаленного аккаунта (сброс `deleted_at`).
- **Управление компаниями**:
    - **Просмотр списка компаний**:
        - Отображение списка компаний в таблице.
        - Пагинация для отображения большого количества компаний.
        - Возможность выбора количества компаний на странице.
    - **Создание компании**:
        - Форма для ввода данных новой компании.
        - Валидация данных формы.
        - Сохранение новой компании в базе данных.
    - **Редактирование компании**:
        - Загрузка данных компании с сервера.
        - Форма для редактирования данных компании.
        - Валидация данных формы.
        - Обновление данных компании в базе данных.
    - **Просмотр информации о компании**:
        - Отображение детальной информации о компании: название, адрес, список сотрудников.
- **Автоматические задачи**:
    - **Удаление старых аккаунтов**:
        - CRON-скрипт `delete_old_accounts_cron.php` удаляет аккаунты, помеченные как удаленные более часа назад.
    - **Резервное копирование базы данных**:
        - CRON-скрипт периодически запускает `utils/backup.php` для создания резервной копии базы данных.

### Структура проекта

- **backend/:** Содержит серверную часть приложения (PHP).
    - `index.php`: Обрабатывает GET-запросы для получения списка аккаунтов и данных одного аккаунта, а также POST, PUT, DELETE запросы для соответствующих действий.
    - `create.php`: Обрабатывает POST-запросы для создания новых аккаунтов.
    - `edit.php`: Обрабатывает PUT-запросы для обновления данных аккаунта.
    - `delete.php`: Обрабатывает DELETE-запросы для удаления аккаунтов.
    - `restore.php`: Обрабатывает POST-запросы для восстановления удаленных аккаунтов.
    - `companies.php`: Обрабатывает запросы, связанные с компаниями (получение списка, создание).
    - `company.php`: Обрабатывает запросы, связанные с одной компанией (получение по ID, обновление, удаление).
    - `company_employees.php`: Обрабатывает запросы для получения списка сотрудников компании.
    - `delete_old_accounts_cron.php`: CRON-скрипт для удаления старых аккаунтов.
    - `includes/:` Содержит вспомогательные классы.
        - `database.php`: Класс для работы с базой данных.
        - `account.php`: Класс для работы с аккаунтами.
        - `company.php`: Класс для работы с компаниями.
        - `error_codes.php`: Константы с кодами ошибок.
    - `utils/:` Содержит вспомогательные функции и скрипты.
        - `helper.php`: Файл с различными вспомогательными функциями (валидация, санитизация, генерация паролей).
        - `backup.php`: Скрипт для создания резервной копии базы данных.
    - `config/:` Содержит конфигурационные файлы.
        - `database.php`: Файл с настройками подключения к базе данных.
- **frontend/:** Содержит клиентскую часть приложения (React + TypeScript).
    - `src/:` Содержит исходный код фронтенда.
        - `components/:` Содержит компоненты React.
            - `AccountList.tsx`: Компонент списка аккаунтов.
            - `AccountCreate.tsx`: Компонент формы создания аккаунта.
            - `AccountEdit.tsx`: Компонент формы редактирования аккаунта.
            - `AccountRow.tsx`: Компонент строки таблицы аккаунтов.
            - `AccountTable.tsx`: Компонент таблицы аккаунтов.
            - `ConfirmationDialog.tsx`: Универсальный компонент диалога подтверждения.
            - `InputTextField.tsx`: Обёртка над `TextField` Material-UI.
            - `Trash.tsx`: Компонент корзины (список удаленных аккаунтов).
            - `CompanyList.tsx`: Компонент списка компаний.
            - `CompanyCreate.tsx`: Компонент формы создания компании.
            - `CompanyEdit.tsx`: Компонент формы редактирования компании.
            - `CompanyDetails.tsx`: Компонент для отображения информации о компании.
        - `types/:` Содержит определения типов данных.
            - `Account.ts`: Интерфейс `Account`.
            - `Company.ts`: Интерфейс `Company`.
        - `config.ts`: Файл с конфигурацией приложения.
        - `App.tsx`: Главный компонент приложения, определяющий маршрутизацию.

### Установка и запуск

1. **Настройка бэкенда**:
    - Скопируйте файлы бэкенда в директорию, доступную по HTTP.
    - Настройте подключение к базе данных в `config/database.php`.
    - Настройте CRON для запуска `delete_old_accounts_cron.php` и `utils/backup.php` с нужной периодичностью.
2. **Настройка фронтенда**:
    - Установите зависимости: `npm install` или `yarn install`.
    - Настройте API URL в `src/config.ts`.
    - Запустите приложение: `npm start` или `yarn start`.

### Дополнительная информация

- Номера телефонов хранятся в базе данных в нормализованном формате `+7XXXXXXXXXX`.
- Для "мягкого" удаления аккаунтов используется поле `deleted_at`.
- CRON-скрипт автоматически удаляет старые аккаунты, чтобы поддерживать базу данных в актуальном состоянии.Создает резервную копию базы данных каждые сутки в 1:00
- **Важно:** В текущей версии приложения не реализована аутентификация и авторизация.
- **Планируемые улучшения**: Добавление функциональности фильтрации и сортировки списков, реализация аутентификации и авторизации пользователей. 
